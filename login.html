<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Cuban Sandwich Festival</title>
    <link rel="stylesheet" href="Css/home.css">
    <link rel="stylesheet" href="Css/auth.css">
    <script src="https://kit.fontawesome.com/1b2e7c5bdb.js" crossorigin="anonymous"></script>
</head>
<body>
    <nav>
      <div class="logo-group">
        <div class="logo">
          <img src="Media\Images\CSF.png" alt="Logo" width="64" height="64" />
        </div>
        <div class="partner-logos" aria-hidden="true">
          <img class="partner-logo" src="Media\Images\ToL.png" alt="Partner 1" />
          <img class="partner-logo" src="Media\Images\ToT.png" alt="Partner 2" />
        </div>
      </div>
      <div class="nav-links">
        <a href="Home.html" class="nav-link">Home</a>
        <a href="Vendor-Information.html" class="nav-link">Vendor Resources</a>
        <a href="Vip-Information.html" class="nav-link">Vip Lounge Information</a>
        <a href="Vendor-Booking.html" class="nav-link">Book A Vendor Spot</a>
        <a href="Contact-Us.html" class="nav-link">Contact Us</a>
        <a href="About-Us.html" class="nav-link">About Us</a>
        <a href="login.html" class="nav-link" style="color: #fa9b2f;">Log In or Sign Up</a>
        <a href="adminpage.html" class="nav-link admin-only" style="display:none;">Admin Controls</a>
      </div>
    </nav>

    <main class="auth-page">
        <div class="auth-container">
            <div class="auth-header">
                <h1>Welcome Back</h1>
                <p>Sign in to your Cuban Sandwich Festival account</p>
            </div>

            <div class="auth-form-container">
                <form id="login-form" class="auth-form" onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label for="login-email">Email Address</label>
                        <input type="email" id="login-email" name="email" required 
                               placeholder="Enter your email address">
                    </div>

                    <div class="form-group">
                        <label for="login-password">Password</label>
                        <input type="password" id="login-password" name="password" required 
                               placeholder="Enter your password">
                    </div>

                    <div id="login-error" class="error-message"></div>

                    <button type="submit" class="btn primary full-width">Sign In</button>
                </form>

                <div class="auth-links">
                    <p>Don't have an account? <a href="signup.html">Create one here</a></p>
                    <p><a href="#" onclick="showForgotPassword()">Forgot your password?</a></p>
                </div>

                <div class="demo-credentials">
                    <h3>Demo Account</h3>
                    <p>For testing purposes, you can use:</p>
                    <div class="demo-info">
                        <strong>Admin Account:</strong><br>
                        Email: admin@csfestival.com<br>
                        Password: admin123
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Success/Error Modal -->
    <div id="message-modal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <h3 id="message-title">Success</h3>
            <p id="message-text"></p>
            <div class="modal-actions">
                <button class="btn primary" onclick="closeMessageModal()">OK</button>
            </div>
        </div>
    </div>

    <script src="Scripts/auth.js"></script>
    <script>
        // Page-specific login handling
        function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            const errorEl = document.getElementById('login-error');

            try {
                const user = userManager.login(email, password);
                showMessage('Welcome Back!', `Successfully signed in as ${user.name}. Redirecting to home page...`);
                
                // Redirect after short delay
                setTimeout(() => {
                    window.location.href = 'Home.html';
                }, 2000);
            } catch (error) {
                errorEl.textContent = error.message;
            }
        }

        function showForgotPassword() {
            alert('Password reset functionality coming soon! For now, please contact support or use the demo account.');
        }

        function showMessage(title, message) {
            document.getElementById('message-title').textContent = title;
            document.getElementById('message-text').textContent = message;
            document.getElementById('message-modal').setAttribute('aria-hidden', 'false');
        }

        function closeMessageModal() {
            document.getElementById('message-modal').setAttribute('aria-hidden', 'true');
        }

        // Update UI on page load
        document.addEventListener('DOMContentLoaded', function() {
            // If user is already logged in, redirect to home
            const currentUser = userManager.getCurrentUser();
            if (currentUser) {
                showMessage('Already Signed In', `You're already signed in as ${currentUser.name}. Redirecting to home page...`);
                setTimeout(() => {
                    window.location.href = 'Home.html';
                }, 2000);
            }
        });
    </script>
    
    <!-- Footer from Home.html -->
    <footer class="site-footer">
      <div class="footer-inner">
        <div class="footer-col footer-about">
          <img src="Media/Images/CSF.png" alt="CSF" class="footer-logo" />
          <h4>Cuban Sandwich Festival</h4>
          <p>The Cuban Sandwich Festival, Taste of Latino, and other Festivals bring the best local events, vendors, and entertainment to your neighborhoods. Join us to celebrate culture, food, and community.</p>
        </div>
        <div class="footer-col footer-links">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="Events.html">Events</a></li>
            <li><a href="Vendor-Information.html">Vendor Resources</a></li>
            <li><a href="News.html">News</a></li>
            <li><a href="Contact-Us.html">Contact</a></li>
          </ul>
        </div>
        <div class="footer-col footer-newsletter">
          <h4>Join Our Mailing List</h4>
          <form class="footer-newsletter-form" aria-label="Subscribe to newsletter">
            <input type="email" name="email" placeholder="you@example.com" required />
            <button type="submit" class="subscribe-btn">Subscribe</button>
          </form>
          <p class="subscribe-note">We respect your privacy. Unsubscribe anytime.</p>
        </div>
        <div class="footer-col footer-social">
          <h4>Follow Us</h4>
          <div class="social-links">
            <a href="#" aria-label="Facebook" class="social-link"><i class="fa-brands fa-facebook"></i></a>
            <a href="#" aria-label="X" class="social-link"><i class="fa-brands fa-x-twitter"></i></a>
            <a href="#" aria-label="Instagram" class="social-link"><i class="fa-brands fa-instagram"></i></a>
            <a href="#" aria-label="YouTube" class="social-link"><i class="fa-brands fa-youtube"></i></a>
          </div>
        </div>
      </div>
      <div class="footer-bottom">
        <div class="footer-inner small">
          <p>2025 ©<span id="current-year"></span> Cuban Sandwich Festival — All rights reserved.</p>
          <p class="footer-legal"><a href="#">Privacy Policy</a> · <a href="#">Terms</a></p>
        </div>
      </div>
    </footer>
    
    <!-- Auth Scripts -->
    <script src="Scripts/auth.js"></script>
    <script src="Scripts/nav-auth.js"></script>
</body>
</html>